import{defineComponent as e,ref as t,computed as a,watch as i,resolveComponent as o,mergeProps as r,unref as l,withCtx as n,createVNode as s,toDisplayString as u,createTextVNode as d,withModifiers as p,createCommentVNode as c,createBlock as v,openBlock as m,useSSRContext as f}from"vue";import{ssrRenderAttrs as y,ssrInterpolate as b,ssrRenderComponent as h}from"vue/server-renderer";import g from"libphonenumber-js";import{useReCaptcha as w}from"vue-recaptcha-v3";import{I as x}from"./useSearchHistory-CgpSfsMy.mjs";import{o as _}from"./phoneCodes-CDH_btW_.mjs";import{g as k,a as $,x as C,t as L,b as W,u as T,v as A}from"./server.mjs";import{s as V}from"./_plugin-vue_export-helper-DlAUqK2U.mjs";import"../_/nitro.mjs";import"fs";import"os";import"path";import"url";import"http";import"https";import"events";import"zlib";import"@fastify/busboy";import"jsonwebtoken";import"node-forge";import"crypto";import"jwks-rsa";import"bcryptjs";import"mongoose";import"lru-cache";import"@unocss/core";import"@unocss/preset-wind3";import"devalue";import"consola";import"unhead";import"node:http";import"node:https";import"node:events";import"node:buffer";import"node:fs";import"node:url";import"unhead/server";import"unhead/plugins";import"unhead/utils";import"vue-bundle-renderer/runtime";import"node:path";import"node:crypto";import"vue-router";import"@unhead/addons";import"@unhead/schema-org/vue";import"axios";import"idb";const j=e({__name:"[[number]]",__ssrInlineRender:!0,setup(e){const{t:f,locale:V}=k(),j=$(),M=C(),I=L();x();const S=t(!1);t(!1);const z=t(""),H=t({code:"",countryWithCode:"",countryTranslated:""}),O=t(null),R=t(null);t(!1),w();const{$api:D}=W(),E=a((()=>{if(!H.value||!z.value)return!1;const e=H.value.code+z.value.trim(),t=g("+"+e);return!!t&&t.isValid()})),J=a((()=>_.map((e=>({...e,countryWithCode:`${f(`country.${e.country}`)||e.country} (+${e.code})`,countryTranslated:f(`country.${e.country}`)||e.country}))))),ee=(e,t)=>{if(!e||!e.countryWithCode)return!1;const a=t.toLowerCase();return e.countryWithCode.toLowerCase().includes(a)||e.countryTranslated.toLowerCase().includes(a)||e.code.includes(a)},P=e=>JSON.stringify(e,null,2),se=async()=>{if(H.value.code&&z.value){const e=`${H.value.code}${z.value}`;if(M.params.number===e)return void await ue();await j.push(I(`/verification/${e}`))}},U=async()=>{},ue=async(e=0)=>{},q=e=>{if(!e)return"info";switch(e.toLowerCase()){case"pending":return"warning";case"verified":return"success";case"failed":case"expired":return"error";default:return"info"}},N=t(null);return T((()=>{var e,t;const a=f("verification.title")+" | WhatsApp Profile API",i=f("verification.infoMessage")+" "+f("verification.title")+" - WhatsApp Profile API.",o=`${A}/verification/${M.params.number||""}`;return{title:a,meta:[{name:"description",content:f("verification.infoMessage")},{property:"og:title",content:f("verification.title")+" | WhatsApp Profile API"},{property:"og:description",content:f("verification.infoMessage")},{property:"og:type",content:"website"},{property:"og:url",content:o},{property:"og:site_name",content:"WhatsApp Profile API"},{property:"og:image",content:"/web-app-manifest-512x512.png"},{name:"twitter:card",content:"summary_large_image"},{name:"twitter:title",content:a},{name:"twitter:description",content:i},{name:"twitter:image",content:"/web-app-manifest-512x512.png"},{name:"robots",content:"index, follow"},{name:"language",content:M.params.lang||"en"}],link:[{rel:"canonical",href:o}],script:[{type:"application/ld+json",innerHTML:JSON.stringify({"@context":"https://schema.org","@type":"WebPage",name:a,description:i,url:o,inLanguage:M.params.lang||"en",isPartOf:{"@type":"WebSite",name:"WhatsApp Profile API",url:null==(t=null==(e=N.value)?void 0:e.public)?void 0:t.siteUrl},mainEntity:{"@type":"FAQPage",mainEntity:[{"@type":"Question",name:f("verification.title"),acceptedAnswer:{"@type":"Answer",text:f("verification.infoMessage")}}]}})}]}})),i(H,(e=>{})),(e,t,a,i)=>{const g=o("v-form"),w=o("v-autocomplete"),x=o("v-list-item"),_=o("v-text-field"),k=o("v-btn"),$=o("v-container"),C=o("v-alert"),L=o("v-row"),W=o("v-col"),T=o("v-textarea");t(`<div${y(r({class:"py-5 px-3 px-md-0"},i))} data-v-883b7df9><h1 class="mb-5 mb-md-8 text-center" data-v-883b7df9>${b(l(f)("verification.title"))}</h1>`),t(h(g,{onSubmit:se},{default:n(((e,t,a,i)=>{if(!t)return[s("div",{class:"d-flex phone"},[s(w,{"return-object":"",disabled:S.value,variant:"outlined","hide-details":"",required:"",modelValue:H.value,"onUpdate:modelValue":e=>H.value=e,class:"phone--code",filter:ee,"max-width":"118px","item-title":"countryWithCode",autocomplete:"off","data-lpignore":"true","data-form-type":"other",label:l(f)("lookup.country"),items:J.value},{selection:n((({item:e})=>[s("span",null,"+"+u(e.raw.code),1)])),item:n((({props:e,item:t})=>[s(x,r(e,{title:t.raw.countryWithCode,subtitle:"+"+t.raw.code}),null,16,["title","subtitle"])])),_:1},8,["disabled","modelValue","onUpdate:modelValue","label","items"]),s(_,{disabled:S.value,modelValue:z.value,"onUpdate:modelValue":e=>z.value=e,autocomplete:"off","data-lpignore":"true","data-form-type":"other",class:"phone--number",variant:"outlined",tile:"",type:"tel","hide-details":"",label:l(f)("verification.inputLabel"),required:""},null,8,["disabled","modelValue","onUpdate:modelValue","label"])]),s("div",{class:"text-center pt-5"},[s(k,{disabled:!E.value,type:"submit",loading:S.value,size:"large",color:"primary"},{default:n((()=>[d(u(l(f)("verification.button")),1)])),_:1},8,["disabled","loading"])])];t(`<div class="d-flex phone" data-v-883b7df9${i}>`),t(h(w,{"return-object":"",disabled:S.value,variant:"outlined","hide-details":"",required:"",modelValue:H.value,"onUpdate:modelValue":e=>H.value=e,class:"phone--code",filter:ee,"max-width":"118px","item-title":"countryWithCode",autocomplete:"off","data-lpignore":"true","data-form-type":"other",label:l(f)("lookup.country"),items:J.value},{selection:n((({item:e},t,a,i)=>{if(!t)return[s("span",null,"+"+u(e.raw.code),1)];t(`<span data-v-883b7df9${i}>+${b(e.raw.code)}</span>`)})),item:n((({props:e,item:t},a,i,o)=>{if(!a)return[s(x,r(e,{title:t.raw.countryWithCode,subtitle:"+"+t.raw.code}),null,16,["title","subtitle"])];a(h(x,r(e,{title:t.raw.countryWithCode,subtitle:"+"+t.raw.code}),null,i,o))})),_:1},a,i)),t(h(_,{disabled:S.value,modelValue:z.value,"onUpdate:modelValue":e=>z.value=e,autocomplete:"off","data-lpignore":"true","data-form-type":"other",class:"phone--number",variant:"outlined",tile:"",type:"tel","hide-details":"",label:l(f)("verification.inputLabel"),required:""},null,a,i)),t(`</div><div class="text-center pt-5" data-v-883b7df9${i}>`),t(h(k,{disabled:!E.value,type:"submit",loading:S.value,size:"large",color:"primary"},{default:n(((e,t,a,i)=>{if(!t)return[d(u(l(f)("verification.button")),1)];t(`${b(l(f)("verification.button"))}`)})),_:1},a,i)),t("</div>")})),_:1},a)),t(h($,null,{default:n(((e,t,a,i)=>{if(!t)return[E.value?c("",!0):(m(),v(C,{key:0,class:"text-body-2 alert-send-button mx-auto mt-5",type:"info",text:l(f)("verification.infoMessage"),density:"compact"},null,8,["text"])),O.value?(m(),v("div",{key:1,class:"mt-5"},[s(L,null,{default:n((()=>[s(W,{cols:"12",md:"6"},{default:n((()=>[s("div",{class:"d-flex flex-wrap gap-10"},[s(k,{color:"primary",target:"_blank",link:"",href:O.value.whatsappLink},{default:n((()=>[d(u(l(f)("verification.verifyLink")),1)])),_:1},8,["href"]),s(k,{onClick:p(U,["prevent"]),color:"secondary"},{default:n((()=>[d(u(l(f)("verification.reset")),1)])),_:1})]),s("div",{class:"mt-4"},[s(C,{type:q(O.value.status),border:"start",prominent:"",class:"text-body-1"},{title:n((()=>[d(u(l(f)("verification.statusTitle")),1)])),default:n((()=>[s("span",null,u(O.value.status||l(f)("verification.status.unknown")),1)])),_:1},8,["type"])])])),_:1}),s(W,{cols:"12",md:"6"},{default:n((()=>[s("h3",null,u(l(f)("verification.responseTitle")),1),s(T,{rows:"10","model-value":P(O.value),readonly:""},null,8,["model-value"])])),_:1})])),_:1})])):c("",!0),R.value?(m(),v("div",{key:2,class:"mt-5"},[s("h3",null,u(l(f)("verification.statusResponseTitle")),1),s(T,{rows:"10","model-value":P(R.value),readonly:""},null,8,["model-value"])])):c("",!0)];E.value?t("\x3c!----\x3e"):t(h(C,{class:"text-body-2 alert-send-button mx-auto mt-5",type:"info",text:l(f)("verification.infoMessage"),density:"compact"},null,a,i)),O.value?(t(`<div class="mt-5" data-v-883b7df9${i}>`),t(h(L,null,{default:n(((e,t,a,i)=>{if(!t)return[s(W,{cols:"12",md:"6"},{default:n((()=>[s("div",{class:"d-flex flex-wrap gap-10"},[s(k,{color:"primary",target:"_blank",link:"",href:O.value.whatsappLink},{default:n((()=>[d(u(l(f)("verification.verifyLink")),1)])),_:1},8,["href"]),s(k,{onClick:p(U,["prevent"]),color:"secondary"},{default:n((()=>[d(u(l(f)("verification.reset")),1)])),_:1})]),s("div",{class:"mt-4"},[s(C,{type:q(O.value.status),border:"start",prominent:"",class:"text-body-1"},{title:n((()=>[d(u(l(f)("verification.statusTitle")),1)])),default:n((()=>[s("span",null,u(O.value.status||l(f)("verification.status.unknown")),1)])),_:1},8,["type"])])])),_:1}),s(W,{cols:"12",md:"6"},{default:n((()=>[s("h3",null,u(l(f)("verification.responseTitle")),1),s(T,{rows:"10","model-value":P(O.value),readonly:""},null,8,["model-value"])])),_:1})];t(h(W,{cols:"12",md:"6"},{default:n(((e,t,a,i)=>{if(!t)return[s("div",{class:"d-flex flex-wrap gap-10"},[s(k,{color:"primary",target:"_blank",link:"",href:O.value.whatsappLink},{default:n((()=>[d(u(l(f)("verification.verifyLink")),1)])),_:1},8,["href"]),s(k,{onClick:p(U,["prevent"]),color:"secondary"},{default:n((()=>[d(u(l(f)("verification.reset")),1)])),_:1})]),s("div",{class:"mt-4"},[s(C,{type:q(O.value.status),border:"start",prominent:"",class:"text-body-1"},{title:n((()=>[d(u(l(f)("verification.statusTitle")),1)])),default:n((()=>[s("span",null,u(O.value.status||l(f)("verification.status.unknown")),1)])),_:1},8,["type"])])];t(`<div class="d-flex flex-wrap gap-10" data-v-883b7df9${i}>`),t(h(k,{color:"primary",target:"_blank",link:"",href:O.value.whatsappLink},{default:n(((e,t,a,i)=>{if(!t)return[d(u(l(f)("verification.verifyLink")),1)];t(`${b(l(f)("verification.verifyLink"))}`)})),_:1},a,i)),t(h(k,{onClick:U,color:"secondary"},{default:n(((e,t,a,i)=>{if(!t)return[d(u(l(f)("verification.reset")),1)];t(`${b(l(f)("verification.reset"))}`)})),_:1},a,i)),t(`</div><div class="mt-4" data-v-883b7df9${i}>`),t(h(C,{type:q(O.value.status),border:"start",prominent:"",class:"text-body-1"},{title:n(((e,t,a,i)=>{if(!t)return[d(u(l(f)("verification.statusTitle")),1)];t(`${b(l(f)("verification.statusTitle"))}`)})),default:n(((e,t,a,i)=>{if(!t)return[s("span",null,u(O.value.status||l(f)("verification.status.unknown")),1)];t(`<span data-v-883b7df9${i}>${b(O.value.status||l(f)("verification.status.unknown"))}</span>`)})),_:1},a,i)),t("</div>")})),_:1},a,i)),t(h(W,{cols:"12",md:"6"},{default:n(((e,t,a,i)=>{if(!t)return[s("h3",null,u(l(f)("verification.responseTitle")),1),s(T,{rows:"10","model-value":P(O.value),readonly:""},null,8,["model-value"])];t(`<h3 data-v-883b7df9${i}>${b(l(f)("verification.responseTitle"))}</h3>`),t(h(T,{rows:"10","model-value":P(O.value),readonly:""},null,a,i))})),_:1},a,i))})),_:1},a,i)),t("</div>")):t("\x3c!----\x3e"),R.value?(t(`<div class="mt-5" data-v-883b7df9${i}><h3 data-v-883b7df9${i}>${b(l(f)("verification.statusResponseTitle"))}</h3>`),t(h(T,{rows:"10","model-value":P(R.value),readonly:""},null,a,i)),t("</div>")):t("\x3c!----\x3e")})),_:1},a)),t("</div>")}}}),M=j.setup;j.setup=(e,t)=>{const a=f();return(a.modules||(a.modules=new Set)).add("pages/verification/[[number]].vue"),M?M(e,t):void 0};const I=V(j,[["__scopeId","data-v-883b7df9"]]);export{I as default};
//# sourceMappingURL=_number_-BhCYuJ4p.mjs.map
