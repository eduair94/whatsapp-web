{"version":3,"file":"search.mjs","sources":["../../../../../server/api/search.ts"],"sourcesContent":null,"names":["rateLimiter","IpRateLimiterService","RATE_LIMIT","WINDOW","search","defineEventHandler","async","event","authenticateUser","success","setResponseStatus","error","statusCode","authRequired","clientIP","headers","_b","node","_a","req","getHeaders","split","trim","_e","_d","_c","connection","remoteAddress","_h","_g","_f","socket","getClientIP","checkRateLimit","limitInfo","getRequestCount","rateLimit","limit","max","current","count","restartsIn","query","getQuery","page","parseInt","number","countryCode","hasProfilePic","isBusiness","dateFrom","dateTo","includeCount","params","URLSearchParams","append","toString","cacheKey","setHeader","etag","Buffer","from","getHeader","endpoint","response","axios","get","incrementSuccessfulRequest","data","console","message","status"],"mappings":"gxBAeA,MAAAA,EAAA,IAAAC,GAAA,EAAA,oBACAD,EAAAE,WAAA,GACAF,EAAAG,OAAA,IAEA,MAAAC,EAAAC,GAAAC,MAAAC,cACA,IAGA,WADAC,EAAAD,IACAE,QAEA,OADAC,EAAAH,EAAA,KACA,CACAE,SAAA,EACAE,MAAA,kEACAC,WAAA,IACAC,cAAA,GAKA,MAAAC,EA7BA,SAAAP,uBACA,MAAAQ,EAKA,SAAAR,WACA,OAAA,OAAAS,EAAA,WAAAC,WAAA,EAAAC,EAAAC,UAAA,EAAAH,EAAAD,UAAAR,EAAAQ,OACA,CAPAK,CAAAb,IAAA,CAAA,EACA,OAAA,OAAAS,EAAA,OAAAE,EAAAH,EAAA,yBAAA,EAAAG,EAAAG,MAAA,KAAA,SAAA,EAAAL,EAAAM,SAAAP,EAAA,cAAAA,EAAA,gBAAAA,EAAA,sBAAA,OAAAQ,EAAA,OAAAC,EAAA,OAAAC,EAAAlB,EAAAU,WAAA,EAAAQ,EAAAN,cAAAO,iBAAA,EAAAH,EAAAI,iBAAA,OAAAC,EAAA,OAAAC,EAAA,OAAAC,EAAAvB,EAAAU,WAAA,EAAAa,EAAAX,UAAA,EAAAU,EAAAE,iBAAAJ,gBAAA,SACA,CA0BAK,CAAAzB,IAAA,UAGA,UADAP,EAAAiC,eAAAnB,GACA,CACA,MAAAoB,QAAAlC,EAAAmC,gBAAArB,GAEA,OADAJ,EAAAH,EAAA,KACA,CACAE,SAAA,EACAE,MAAA,+CACAC,WAAA,IACAwB,UAAA,CACAC,MAAAH,EAAAI,IACAC,QAAAL,EAAAM,MACAC,WAAAP,EAAAO,YAEA,CAGA,MAAAC,EAAAC,EAAApC,GAGAqC,EAAAC,SAAAH,EAAAE,OAAA,EACAP,EAAAQ,SAAAH,EAAAL,QAAA,GACAS,EAAAJ,EAAAI,OACAC,EAAAL,EAAAK,YACAC,EAAAN,EAAAM,cACAC,EAAAP,EAAAO,WACAC,EAAAR,EAAAQ,SACAC,EAAAT,EAAAS,OACAC,EAAA,SAAAV,EAAAU,aACAhD,EAAAsC,EAAAtC,OAGAiD,EAAA,IAAAC,gBAGAV,GAAAS,EAAAE,OAAA,OAAAX,EAAAY,YACAnB,GAAAgB,EAAAE,OAAA,QAAAlB,EAAAmB,YACAV,GAAAO,EAAAE,OAAA,SAAAT,GACAC,GAAAM,EAAAE,OAAA,cAAAR,GACAC,GAAAK,EAAAE,OAAA,gBAAAP,GACAC,GAAAI,EAAAE,OAAA,aAAAN,GACAC,GAAAG,EAAAE,OAAA,WAAAL,GACAC,GAAAE,EAAAE,OAAA,SAAAJ,GACAC,GAAAC,EAAAE,OAAA,eAAA,QACAnD,GAAAiD,EAAAE,OAAA,SAAAnD,GAIA,MAAAqD,EAAAJ,EAAAG,WAOA,GAJAE,EAAAnD,EAAA,gBAAA,2BACAmD,EAAAnD,EAAA,OAAA,qDAGAkD,EAAA,CACA,MAAAE,EAAAC,OAAAC,KAAAJ,GAAAD,SAAA,UACAE,EAAAnD,EAAA,OAAA,IAAAoD,MAIA,GADAG,EAAAvD,EAAA,mBACA,IAAAoD,KAEA,OADAjD,EAAAH,EAAA,KACA,IACA,CAGA,MAAAwD,EAAA,oDAAAV,EAAAG,aAEAQ,QAAAC,EAAAC,IAAAH,GAKA,aAFA/D,EAAAmE,2BAAArD,GAEAkD,EAAAI,WACAzD,GAIA,OAHA0D,QAAA1D,MAAA,6BAAAA,GAGA,CACAF,SAAA,EACAE,OAAA,OAAAK,EAAA,OAAAE,EAAAP,EAAAqD,eAAA,EAAA9C,EAAAkD,eAAAE,UAAA,wBACA1D,YAAA,OAAAa,EAAAd,EAAAqD,eAAA,EAAAvC,EAAA8C,SAAA,IACA"}