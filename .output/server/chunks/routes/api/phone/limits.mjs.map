{"version":3,"file":"limits.mjs","sources":["../../../../../../server/api/phone/limits.ts"],"sourcesContent":null,"names":["limits","defineEventHandler","async","event","setResponseHeaders","Pragma","Expires","ip","_a","node","req","headers","toString","split","socket","remoteAddress","authToken","getQuery","auth","isAuthenticated","error","console","authResult","authenticateUser","ipRateLimit","IpRateLimiterService","success","limitStatus","getRequestCount","hasApiKey","apiKeyResult","user","getApiKey","uid","apiKey","res","authenticated","current","count","maximum","max","remaining","Math","restartsInSeconds","restartsIn","restartsInMinutes","ceil","rateLimitInfo","apiKeyLimits"],"mappings":"oyBAIA,MAAAA,EAAAC,GAAAC,MAAAC,UAEAC,EAAAD,EAAA,CACA,gBAAA,iDACAE,OAAA,WACAC,QAAA,MAGA,IAEA,MAAAC,GAAA,OAAAC,EAAAL,EAAAM,KAAAC,IAAAC,QAAA,yBAAA,EAAAH,EAAAI,WAAAC,MAAA,KAAA,KAAAV,EAAAM,KAAAC,IAAAI,OAAAC,eAAA,UAIAC,EADAC,EAAAd,GACAe,KAEA,IACAC,GAAA,EAGA,GAAAH,EACA,IAGAG,GAAA,QAGAC,GACAC,QAAAD,MAAA,sBAAAA,EAAA,CAMA,MAAAE,QAAAC,EAAApB,GACAqB,EAAA,IAAAC,EAAAH,EAAAI,SACAC,QAAAH,EAAAI,gBAAArB,GACA,IAAAsB,GAAA,EACAC,EAAA,KACAR,EAAAI,SAAAJ,EAAAS,OACAD,QAAAE,EAAAV,EAAAS,KAAAE,KACAJ,EAAAC,EAAAJ,WAAAI,EAAAI,QAGA,MAAAC,EAAA,CACAT,SAAA,EACAnB,GAAA,YAAAA,EAAA,UAAAA,EACA6B,cAAAjB,EACAU,YACA7B,OAAA,CACAqC,QAAAV,EAAAW,MACAC,QAAAZ,EAAAa,IACAC,UAAAC,KAAAF,IAAA,EAAAb,EAAAa,IAAAb,EAAAW,OACAK,kBAAAhB,EAAAiB,WACAC,kBAAAH,KAAAI,KAAAnB,EAAAiB,WAAA,MAMA,aAHAd,WAAAiB,iBACAZ,EAAAa,aAAAlB,EAAAiB,eAEAZ,QACAf,GAGA,OAFAC,QAAAD,MAAA,2BAAAA,GAEA,CACAM,SAAA,EACAN,MAAA,4CACApB,OAAA,CACAqC,QAAA,EACAE,QAAA,GACAE,UAAA,GACAE,kBAAA,EACAE,kBAAA,GAEA"}