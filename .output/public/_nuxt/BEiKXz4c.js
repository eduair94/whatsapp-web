var pe=Object.defineProperty;var we=(s,e,n)=>e in s?pe(s,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):s[e]=n;var V=(s,e,n)=>we(s,typeof e!="symbol"?e+"":e,n);import{v as De,x as k,y as S,u as be,z as M,A as Be,B as xe,C as Ce,D as Pe,l as Q,E as re,f as ue,F as K,G as ze,H as Re,I as Oe,h as v,J as Se,K as de,L as $e,M as je,e as Ee,N as Me,j as Te,O as Ue,r as z,c as N,o as R,w,a as b,b as D,n as F,g as W,t as B,d as H,P as Ve,Q as oe,R as ie,S as ce}from"./IELR2iwA.js";import{c as Ne}from"./ClpmpRPa.js";import{p as Fe}from"./CDH_btW_.js";const Le=[1779033703,-1150833019,1013904242,-1521486534,1359893119,-1694144372,528734635,1541459225],ke=[1116352408,1899447441,-1245643825,-373957723,961987163,1508970993,-1841331548,-1424204075,-670586216,310598401,607225278,1426881987,1925078388,-2132889090,-1680079193,-1046744716,-459576895,-272742522,264347078,604807628,770255983,1249150122,1555081692,1996064986,-1740746414,-1473132947,-1341970488,-1084653625,-958395405,-710438585,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,-2117940946,-1838011259,-1564481375,-1474664885,-1035236496,-949202525,-778901479,-694614492,-200395387,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,-2067236844,-1933114872,-1866530822,-1538233109,-1090935817,-965641998],qe="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",L=[];class He{constructor(){V(this,"_data",new G);V(this,"_hash",new G([...Le]));V(this,"_nDataBytes",0);V(this,"_minBufferSize",0)}finalize(e){e&&this._append(e);const n=this._nDataBytes*8,t=this._data.sigBytes*8;return this._data.words[t>>>5]|=128<<24-t%32,this._data.words[(t+64>>>9<<4)+14]=Math.floor(n/4294967296),this._data.words[(t+64>>>9<<4)+15]=n,this._data.sigBytes=this._data.words.length*4,this._process(),this._hash}_doProcessBlock(e,n){const t=this._hash.words;let a=t[0],o=t[1],r=t[2],h=t[3],f=t[4],g=t[5],l=t[6],m=t[7];for(let u=0;u<64;u++){if(u<16)L[u]=e[n+u]|0;else{const c=L[u-15],i=(c<<25|c>>>7)^(c<<14|c>>>18)^c>>>3,p=L[u-2],x=(p<<15|p>>>17)^(p<<13|p>>>19)^p>>>10;L[u]=i+L[u-7]+x+L[u-16]}const P=f&g^~f&l,d=a&o^a&r^o&r,_=(a<<30|a>>>2)^(a<<19|a>>>13)^(a<<10|a>>>22),$=(f<<26|f>>>6)^(f<<21|f>>>11)^(f<<7|f>>>25),j=m+$+P+ke[u]+L[u],E=_+d;m=l,l=g,g=f,f=h+j|0,h=r,r=o,o=a,a=j+E|0}t[0]=t[0]+a|0,t[1]=t[1]+o|0,t[2]=t[2]+r|0,t[3]=t[3]+h|0,t[4]=t[4]+f|0,t[5]=t[5]+g|0,t[6]=t[6]+l|0,t[7]=t[7]+m|0}_append(e){typeof e=="string"&&(e=G.fromUtf8(e)),this._data.concat(e),this._nDataBytes+=e.sigBytes}_process(e){let n,t=this._data.sigBytes/64;e?t=Math.ceil(t):t=Math.max((t|0)-this._minBufferSize,0);const a=t*16,o=Math.min(a*4,this._data.sigBytes);if(a){for(let r=0;r<a;r+=16)this._doProcessBlock(this._data.words,r);n=this._data.words.splice(0,a),this._data.sigBytes-=o}return new G(n,o)}}class G{constructor(e,n){V(this,"words");V(this,"sigBytes");e=this.words=e||[],this.sigBytes=n===void 0?e.length*4:n}static fromUtf8(e){const n=unescape(encodeURIComponent(e)),t=n.length,a=[];for(let o=0;o<t;o++)a[o>>>2]|=(n.charCodeAt(o)&255)<<24-o%4*8;return new G(a,t)}toBase64(){const e=[];for(let n=0;n<this.sigBytes;n+=3){const t=this.words[n>>>2]>>>24-n%4*8&255,a=this.words[n+1>>>2]>>>24-(n+1)%4*8&255,o=this.words[n+2>>>2]>>>24-(n+2)%4*8&255,r=t<<16|a<<8|o;for(let h=0;h<4&&n*8+h*6<this.sigBytes*8;h++)e.push(qe.charAt(r>>>6*(3-h)&63))}return e.join("")}concat(e){if(this.words[this.sigBytes>>>2]&=4294967295<<32-this.sigBytes%4*8,this.words.length=Math.ceil(this.sigBytes/4),this.sigBytes%4)for(let n=0;n<e.sigBytes;n++){const t=e.words[n>>>2]>>>24-n%4*8&255;this.words[this.sigBytes+n>>>2]|=t<<24-(this.sigBytes+n)%4*8}else for(let n=0;n<e.sigBytes;n+=4)this.words[this.sigBytes+n>>>2]=e.words[n>>>2];this.sigBytes+=e.sigBytes}}function Ie(s){return new He().finalize(s).toBase64()}function I(s){return Ie(De(s))}const Ge={trailing:!0};function We(s,e=25,n={}){if(n={...Ge,...n},!Number.isFinite(e))throw new TypeError("Expected `wait` to be a finite number");let t,a,o=[],r,h;const f=(g,l)=>(r=Ae(s,g,l),r.finally(()=>{if(r=null,n.trailing&&h&&!a){const m=f(g,h);return h=null,m}}),r);return function(...g){return r?(n.trailing&&(h=g),r):new Promise(l=>{const m=!a&&n.leading;clearTimeout(a),a=setTimeout(()=>{a=null;const u=n.leading?t:f(this,g);for(const P of o)P(u);o=[]},e),m?(t=f(this,g),l(t)):o.push(l)})}}async function Ae(s,e,n){return await s.apply(e,n)}const Je=s=>s==="defer"||s===!1;function Qe(...s){var P;const e=typeof s[s.length-1]=="string"?s.pop():void 0;Ke(s[0],s[1])&&s.unshift(e);let[n,t,a={}]=s;const o=k(()=>S(n));if(typeof o.value!="string")throw new TypeError("[nuxt] [useAsyncData] key must be a string.");if(typeof t!="function")throw new TypeError("[nuxt] [useAsyncData] handler must be a function.");const r=be();a.server??(a.server=!0),a.default??(a.default=Ye),a.getCachedData??(a.getCachedData=he),a.lazy??(a.lazy=!1),a.immediate??(a.immediate=!0),a.deep??(a.deep=M.deep),a.dedupe??(a.dedupe="cancel"),a._functionName,r._asyncData[o.value];const h={cause:"initial",dedupe:a.dedupe};(P=r._asyncData[o.value])!=null&&P._init||(h.cachedData=a.getCachedData(o.value,r,{cause:"initial"}),r._asyncData[o.value]=le(r,o.value,t,a,h.cachedData));const f=r._asyncData[o.value];f._deps++;const g=()=>r._asyncData[o.value].execute(h),l=a.server!==!1&&r.payload.serverRendered;{let d=function(c){const i=r._asyncData[c];i!=null&&i._deps&&(i._deps--,i._deps===0&&(i==null||i._off()))};const _=Be();if(_&&l&&a.immediate&&!_.sp&&(_.sp=[]),_&&!_._nuxtOnBeforeMountCbs){_._nuxtOnBeforeMountCbs=[];const c=_._nuxtOnBeforeMountCbs;xe(()=>{c.forEach(i=>{i()}),c.splice(0,c.length)}),Ce(()=>c.splice(0,c.length))}const $=_&&(_._nuxtClientOnly||Pe(Ne,!1));l&&r.isHydrating&&(f.error.value||f.data.value!=null)?(f.pending.value=!1,f.status.value=f.error.value?"error":"success"):_&&(!$&&r.payload.serverRendered&&r.isHydrating||a.lazy)&&a.immediate?_._nuxtOnBeforeMountCbs.push(g):a.immediate&&g();const j=Se();if(a.watch){const c=Q(a.watch,()=>{f._execute({cause:"watch",dedupe:a.dedupe})},{flush:"post"});j&&re(()=>c())}const E=Q(o,(c,i)=>{var y,C;const p=((y=r._asyncData[i])==null?void 0:y.data.value)!==M.value;i&&d(i);const x={cause:"initial",dedupe:a.dedupe};(C=r._asyncData[c])!=null&&C._init||(x.cachedData=a.getCachedData(c,r,{cause:"initial"}),r._asyncData[c]=le(r,c,t,a,x.cachedData)),r._asyncData[c]._deps++,(a.immediate||p)&&r._asyncData[c].execute(x)},{flush:"sync"});j&&re(()=>{E(),d(o.value)})}const m={data:J(()=>{var d;return(d=r._asyncData[o.value])==null?void 0:d.data}),pending:J(()=>{var d;return(d=r._asyncData[o.value])==null?void 0:d.pending}),status:J(()=>{var d;return(d=r._asyncData[o.value])==null?void 0:d.status}),error:J(()=>{var d;return(d=r._asyncData[o.value])==null?void 0:d.error}),refresh:(...d)=>r._asyncData[o.value].execute(...d),execute:(...d)=>r._asyncData[o.value].execute(...d),clear:()=>fe(r,o.value)},u=Promise.resolve(r._asyncDataPromises[o.value]).then(()=>m);return Object.assign(u,m),u}function J(s){return k({get(){var e;return(e=s())==null?void 0:e.value},set(e){const n=s();n&&(n.value=e)}})}function Ke(s,e){return!(typeof s=="string"||typeof s=="object"&&s!==null||typeof s=="function"&&typeof e=="function")}function fe(s,e){e in s.payload.data&&(s.payload.data[e]=void 0),e in s.payload._errors&&(s.payload._errors[e]=M.errorValue),s._asyncData[e]&&(s._asyncData[e].data.value=void 0,s._asyncData[e].error.value=M.errorValue,s._asyncData[e].pending.value=!1,s._asyncData[e].status.value="idle"),e in s._asyncDataPromises&&(s._asyncDataPromises[e]&&(s._asyncDataPromises[e].cancelled=!0),s._asyncDataPromises[e]=void 0)}function Xe(s,e){const n={};for(const t of e)n[t]=s[t];return n}function le(s,e,n,t,a){var m;(m=s.payload._errors)[e]??(m[e]=M.errorValue);const o=t.getCachedData!==he,r=n,h=t.deep?ue:K,f=a!=null,g=s.hook("app:data:refresh",async u=>{(!u||u.includes(e))&&await l.execute({cause:"refresh:hook"})}),l={data:h(f?a:t.default()),pending:K(!f),error:ze(s.payload._errors,e),status:K("idle"),execute:(u={})=>{if(s._asyncDataPromises[e]){if(Je(u.dedupe??t.dedupe))return s._asyncDataPromises[e];s._asyncDataPromises[e].cancelled=!0}if(u.cause==="initial"||s.isHydrating){const d="cachedData"in u?u.cachedData:t.getCachedData(e,s,{cause:u.cause??"refresh:manual"});if(d!=null)return s.payload.data[e]=l.data.value=d,l.error.value=M.errorValue,l.status.value="success",Promise.resolve(d)}l.pending.value=!0,l.status.value="pending";const P=new Promise((d,_)=>{try{d(r(s))}catch($){_($)}}).then(async d=>{if(P.cancelled)return s._asyncDataPromises[e];let _=d;t.transform&&(_=await t.transform(d)),t.pick&&(_=Xe(_,t.pick)),s.payload.data[e]=_,l.data.value=_,l.error.value=M.errorValue,l.status.value="success"}).catch(d=>{if(P.cancelled)return s._asyncDataPromises[e];l.error.value=Oe(d),l.data.value=v(t.default()),l.status.value="error"}).finally(()=>{P.cancelled||(l.pending.value=!1,delete s._asyncDataPromises[e])});return s._asyncDataPromises[e]=P,s._asyncDataPromises[e]},_execute:We((...u)=>l.execute(...u),0,{leading:!0}),_default:t.default,_deps:0,_init:!0,_hash:void 0,_off:()=>{g(),l._init=!1,o||Re(()=>{l._init||(fe(s,e),l.execute=()=>Promise.resolve(),l.data.value=M.value)})}};return l}const Ye=()=>M.value,he=(s,e,n)=>{if(e.isHydrating)return e.payload.data[s];if(n.cause!=="refresh:manual"&&n.cause!=="refresh:hook")return e.static.data[s]};function Ze(s,e,n){const[t={},a]=typeof e=="string"?[{},e]:[e,n],o=k(()=>S(s)),r=k(()=>S(t.key)||"$f"+I([a,typeof o.value=="string"?o.value:"",...tt(t)]));if(!t.baseURL&&typeof o.value=="string"&&o.value[0]==="/"&&o.value[1]==="/")throw new Error('[nuxt] [useFetch] the request URL must not start with "//".');const{server:h,lazy:f,default:g,transform:l,pick:m,watch:u,immediate:P,getCachedData:d,deep:_,dedupe:$,...j}=t,E=de({...$e,...j,cache:typeof t.cache=="boolean"?void 0:t.cache}),c={server:h,lazy:f,default:g,transform:l,pick:m,immediate:P,getCachedData:d,deep:_,dedupe:$,watch:u===!1?[]:[...u||[],E]};if(!P){let x=function(){c.immediate=!0};Q(r,x,{flush:"sync",once:!0}),Q([...u||[],E],x,{flush:"sync",once:!0})}let i;return Qe(u===!1?r.value:r,()=>{var T;(T=i==null?void 0:i.abort)==null||T.call(i,new DOMException("Request aborted as another request to the same endpoint was initiated.","AbortError")),i=typeof AbortController<"u"?new AbortController:{};const x=S(t.timeout);let y;return x&&(y=setTimeout(()=>i.abort(new DOMException("Request aborted due to timeout.","AbortError")),x),i.signal.onabort=()=>clearTimeout(y)),(t.$fetch||globalThis.$fetch)(o.value,{signal:i.signal,...E}).finally(()=>{clearTimeout(y)})},c)}function et(s,e,n){const[t={},a]=[{},e];return Ze(s,{...t,lazy:!0},a)}function tt(s){var n;const e=[((n=S(s.method))==null?void 0:n.toUpperCase())||"GET",S(s.baseURL)];for(const t of[s.params||s.query]){const a=S(t);if(!a)continue;const o={};for(const[r,h]of Object.entries(a))o[S(r)]=S(h);e.push(o)}if(s.body){const t=S(s.body);if(!t)e.push(I(t));else if(t instanceof ArrayBuffer)e.push(I(Object.fromEntries([...new Uint8Array(t).entries()].map(([a,o])=>[a,o.toString()]))));else if(t instanceof FormData){const a={};for(const o of t.entries()){const[r,h]=o;a[r]=h instanceof File?h.name:h}e.push(I(a))}else if(je(t))e.push(I(de(t)));else try{e.push(I(t))}catch{console.warn("[useFetch] Failed to hash body",t)}}return e}const at={class:"text-center mb-3 mb-md-6"},st={class:"text-h4 font-weight-bold mb-2"},nt={class:"text-subtitle-1 text-medium-emphasis"},rt={key:0,class:"d-flex align-center justify-center mt-4 mb-2"},ot={class:"text-h6 ml-2"},it={class:"text-body-2 text-medium-emphasis ml-2"},ct={key:0,class:"text-center py-8"},lt={class:"text-body-1 mt-4"},ut={key:1,class:"text-center py-8"},dt={class:"text-body-1 text-error"},ft={key:2},ht={class:"d-flex align-center"},_t={class:"flex-grow-1"},mt={class:"d-flex align-center justify-space-between mb-3"},vt={class:"text-h6 mb-2 text-secondary"},yt={class:"text-body-2 mb-3"},gt={class:"d-flex align-center w-100"},pt={class:"text-caption font-weight-bold"},wt={class:"flex-grow-1"},Dt={class:"text-subtitle-2 font-weight-medium"},bt={class:"text-caption text-medium-emphasis"},Bt={class:"text-center mt-4"},xt={key:3,class:"text-center py-8"},Ct={class:"text-body-1"},St=Ee({__name:"ReviewsCarousel",async setup(s){let e,n;const{mobile:t,mdAndDown:a}=Me(),{t:o}=Te(),{data:r,pending:h,error:f,refresh:g}=([e,n]=Ue(()=>et("/api/reviews","$OjWzgvAvcz")),e=await e,n(),e),l=ue(0),m=k(()=>t.value?1:a.value?2:3),u=k(()=>{var C,T;if(!((T=(C=r.value)==null?void 0:C.data)!=null&&T.reviews))return[];const c=r.value.data.reviews,i=m.value;let p=[...c];const x=i*3;for(;p.length<x;)p=[...p,...c];const y=[];for(let q=0;q<p.length;q+=i){const A=p.slice(q,q+i);A.length===i&&y.push(A)}return console.log("Grouped Reviews:",y.length),y}),P=k(()=>t.value?"380px":a.value?"320px":"300px"),d=()=>{l.value=(l.value-1+u.value.length)%u.value.length},_=()=>{l.value=(l.value+1)%u.value.length},$=c=>c.split(" ").map(i=>i.charAt(0)).join("").substring(0,2).toUpperCase(),j=c=>{const i=Fe.find(p=>p.code===c);return i?o(i.country):c},E=c=>{const i=new Date(c),x=Math.abs(new Date().getTime()-i.getTime()),y=Math.ceil(x/(1e3*60*60*24));if(y===1)return o("reviews.daysAgo",{count:1});if(y<7)return o("reviews.daysAgo",{count:y});if(y<30){const C=Math.ceil(y/7);return o("reviews.weeksAgo",{count:C})}if(y<365){const C=Math.ceil(y/30);return o("reviews.monthsAgo",{count:C})}return i.toLocaleDateString()};return(c,i)=>{const p=z("v-rating"),x=z("v-progress-circular"),y=z("v-icon"),C=z("v-btn"),T=z("v-chip"),q=z("v-card-text"),A=z("v-avatar"),_e=z("v-card-actions"),me=z("v-card"),X=z("v-col"),Y=z("v-row"),Z=z("v-container"),ve=z("v-carousel-item"),ye=z("v-carousel");return R(),N(Z,{fluid:"",class:"py-8"},{default:w(()=>[b(Y,{justify:"center"},{default:w(()=>[b(X,{cols:"12",md:"10",lg:"8"},{default:w(()=>{var ee,te,ae,se;return[D("div",at,[D("h2",st,B(c.$t("reviews.title")),1),D("p",nt,B(c.$t("reviews.subtitle")),1),!v(h)&&!v(f)&&((ee=v(r))!=null&&ee.data)?(R(),F("div",rt,[b(p,{"model-value":v(r).data.averageRating,color:"amber",density:"compact","half-increments":"",readonly:"",size:"small"},null,8,["model-value"]),D("span",ot,B(v(r).data.averageRating)+"/5",1),D("span",it," ("+B(v(r).data.totalReviews)+" "+B(v(r).data.totalReviews===1?c.$t("reviews.review"):c.$t("reviews.reviews"))+") ",1)])):W("",!0)]),v(h)?(R(),F("div",ct,[b(x,{indeterminate:"",color:"primary",size:"64"}),D("p",lt,B(c.$t("reviews.loading")),1)])):v(f)?(R(),F("div",ut,[b(y,{color:"error",size:"64",class:"mb-4"},{default:w(()=>i[2]||(i[2]=[H("mdi-alert-circle")])),_:1,__:[2]}),D("p",dt,B(c.$t("reviews.failed")),1),b(C,{color:"primary",variant:"outlined",onClick:i[0]||(i[0]=U=>v(g)()),class:"mt-2"},{default:w(()=>[H(B(c.$t("reviews.tryAgain")),1)]),_:1})])):(te=v(r))!=null&&te.data&&v(r).data.reviews.length>0?(R(),F("div",ft,[D("div",ht,[!v(t)&&v(r).data.reviews.length>m.value?(R(),N(C,{key:0,onClick:d,icon:"mdi-chevron-left",variant:"text",size:"small",class:"me-4 opacity-60"})):W("",!0),D("div",_t,[b(ye,{modelValue:l.value,"onUpdate:modelValue":i[1]||(i[1]=U=>l.value=U),"show-arrows":v(t)&&v(r).data.reviews.length>m.value,"hide-delimiter-background":"","hide-delimiters":"",height:P.value,interval:"5000",cycle:"",continuous:"",class:"rounded"},Ve({default:w(()=>[(R(!0),F(oe,null,ie(u.value,(U,ne)=>(R(),N(ve,{key:`slide-${ne}`},{default:w(()=>[b(Z,{class:"pa-4",style:{height:"100%"}},{default:w(()=>[b(Y,{class:"h-100"},{default:w(()=>[(R(!0),F(oe,null,ie(U,(O,ge)=>(R(),N(X,{key:`${O.id}-${ne}-${ge}`,cols:"12",md:m.value>1?"6":"12",lg:m.value>2?"4":m.value>1?"6":"12",class:"d-flex"},{default:w(()=>[b(me,{elevation:"2",class:"h-100 d-flex flex-column w-100"},{default:w(()=>[b(q,{class:"flex-grow-1"},{default:w(()=>[D("div",mt,[b(p,{"model-value":O.rating,color:"amber",size:"small",readonly:"",density:"compact"},null,8,["model-value"]),O.isVerified?(R(),N(T,{key:0,color:"success",size:"small",variant:"tonal"},{default:w(()=>[H(B(c.$t("reviews.verified")),1)]),_:1})):W("",!0)]),D("h5",vt,B(O.title),1),D("p",yt,B(O.text),1)]),_:2},1024),b(_e,{class:"pt-0"},{default:w(()=>[D("div",gt,[b(A,{size:"32",color:"primary",class:"mr-2"},{default:w(()=>[D("span",pt,B($(O.author)),1)]),_:2},1024),D("div",wt,[D("div",Dt,B(O.author),1),D("div",bt,B(j(O.country))+" â€¢ "+B(E(O.date)),1)]),b(T,{size:"x-small",variant:"text",color:"primary"},{default:w(()=>[H(B(O.source),1)]),_:2},1024)])]),_:2},1024)]),_:2},1024)]),_:2},1032,["md","lg"]))),128))]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))]),_:2},[v(t)?{name:"prev",fn:w(({props:U})=>[b(C,ce(U,{icon:"mdi-chevron-left",variant:"text",size:"small",class:"opacity-60"}),null,16)]),key:"0"}:void 0,v(t)?{name:"next",fn:w(({props:U})=>[b(C,ce(U,{icon:"mdi-chevron-right",variant:"text",size:"small",class:"opacity-60"}),null,16)]),key:"1"}:void 0]),1032,["modelValue","show-arrows","height"])]),!v(t)&&v(r).data.reviews.length>m.value?(R(),N(C,{key:1,onClick:_,icon:"mdi-chevron-right",variant:"text",size:"small",class:"ms-4 opacity-60"})):W("",!0)]),D("div",Bt,[(se=(ae=v(r))==null?void 0:ae.data)!=null&&se.trustpilotUrl?(R(),N(C,{key:0,href:v(r).data.trustpilotUrl,target:"_blank",rel:"noopener noreferrer",color:"primary",variant:"outlined","append-icon":"mdi-open-in-new"},{default:w(()=>[H(B(c.$t("reviews.viewAll")),1)]),_:1},8,["href"])):W("",!0)])])):(R(),F("div",xt,[b(y,{color:"info",size:"64",class:"mb-4"},{default:w(()=>i[3]||(i[3]=[H("mdi-comment-text-outline")])),_:1,__:[3]}),D("p",Ct,B(c.$t("reviews.noReviews")),1)]))]}),_:1})]),_:1})]),_:1})}}});export{St as default};
